
 ___________________________________________
|            |                              |
|    FROM    |           alpine             |
|____________|______________________________|
                        |
                        |
           _____________v___________
          |                         |
          |  Download alpine image  |
          |_________________________|


 ___________________________________________
|            |                              |
|    FROM    |    apk add --update redis    |
|____________|______________________________|
                        |
                        |
           _____________v_________________
          |                               |
          | Get image from previous step  |
          |_______________________________|

           _______________________________         _______________________
          |                               |       |                       |
          | Create a container out of it  | ----> |       Container       |
          |_______________________________|       |_______________________|

           _______________________________         __________________________
          |                               |       |                          |
          | RUN `apk add --update redis`  | ----> | Container with modified  |
          |            in it              |       |       File system        |
          |_______________________________|       |__________________________|

           _______________________________         _________________________
          |                               |       |                         |
          |     Take snapshot of that     | ----> |       FS snapshot       |
          |         container's FS        |       |                         |
          |_______________________________|       |_________________________|

           _______________________________
          |                               |
          |   Shut down that temporary    |
          |           container           |
          |_______________________________|

           _______________________________
          |                               |
          |   Get image ready for next    |
          |          instruction          |
          |_______________________________|


 ___________________________________________
|            |                              |
|    CMD     |       ["redis-server"]       |
|____________|______________________________|
                        |
                        |
           _____________v_________________
          |                               |
          | Get image from previous step  |
          |_______________________________|

           _______________________________         _________________________
          |                               |       |                         |
          | Create a container out of it  | ----> |       Container         |
          |_______________________________|       |_________________________|

           _______________________________         _________________________
          |                               |       |                         |
          | Tell container it should run  | ----> | Container with modified |
          | 'redis-server' when started   |       |     primary command     |
          |_______________________________|       |_________________________|

           _______________________________
          |                               |
          |    Shut down that temporary   |
          |         container             |
          |_______________________________|

           _______________________________
          |                               |
          |   Get image ready for next    |
          |           instruction         |
          |_______________________________|
                          |
                          |
 _________________________v________________________
|                                                  |
| Output is the image generated from previous step |
|__________________________________________________|